<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--        xml ìƒë‹¨ì— ì–´ë–¤ xml ì´ë‹¤ ë¼ê³  í˜•ì‹ì„ ì§€ì •í•´ì•¼í•¨-->
<!--    mapper namespace : ì–´ë–¤ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬í˜„í• ê±´ì§€ ëª…ì‹œ-->
<mapper namespace="com.acorn.springstartstudy.mapper.UsersMapper">


<!--  ðŸŽresultMap : DTO ì˜ í•„ë“œëª…(uId)ì™€ db í…Œì´ë¸”ì˜ ì¹¼ëŸ¼ëª…(u_id)ì´ ë‹¤ë¥¼ ë•Œ ë§µí•‘í•˜ê¸° ìœ„í•´ ìž‘ì„± -->
<!--    id : type ì„ ë‹´ì„ ë³€ìˆ˜ëª… / type : ë§µí•‘í•  dto-->
    <resultMap id="UsersMap" type="com.acorn.springstartstudy.dto.UsersDto">
<!--        (mybatis ê°€ ë°˜í™˜íƒ€ìž… DTO í•„ë“œëª…ì„ ê¸°ì¤€ìœ¼ë¡œ dto ì˜ í•„ë“œëª…ê³¼ í…Œì´ë¸”ì˜ ì¹¼ëŸ¼ëª…ì´ ê°™ì€ ê²ƒì„ ë§µí•‘)-->
<!--        SELECT *, u_id uId FROM USERS WHERE u_id=#{uId}-->
<!--        => SELECT * FROM USERS WHERE u_id=#{uId}-->
        <id column="u_id" property="uId"/> <!--column : pk -->
        <result column="name" property="name"/>
        <result column="pw" property="pw"/>
        <result column="phone" property="phone"/>
        <result column="email" property="email"/>
        <result column="post_time" property="postTime"/>
        <result column="birth" property="birth"/>
        <result column="img_path" property="imgPath"/>
        <result column="gender" property="gender"/>
        <result column="address" property="address"/>
        <result column="detail_address" property="detailAddress"/>
        <result column="permission" property="permission"/>
<!--        /> :  ë¹„ì–´ìžˆëŠ”. ì—´ê³  ë‹«ê¸°-->
    </resultMap>

    <insert id="insertOne" parameterType="com.acorn.springstartstudy.dto.UsersDto">
        INSERT INTO users
        (u_id,pw,name,phone,img_path,email,birth,gender,address,detail_address)
        VALUE
        (#{uId},#{pw},#{name},#{phone},#{imgPath},#{email},#{birth},#{gender},#{address},#{detailAddress})
    </insert>


    <update id="updateOne" parameterType="com.acorn.springstartstudy.dto.UsersDto">
<!--        íŒŒë¼ë¯¸í„° íƒ€ìž…ì„ ì¨ì•¼í•œë‹¤  -->
        UPDATE users SET
            name=#{name},
            pw=#{pw},
            phone=#{phone},
            email=#{email},
            birth=#{birth},
            img_path=#{imgPath},
            gender=#{gender},
            address=#{address},
            detail_address=#{detailAddress}
                WHERE u_id=#{uId}

<!--        dto ì˜ ì´ë¦„-->
    </update>

    <delete id="deleteByUIdAndPw" parameterType="com.acorn.springstartstudy.dto.UsersDto">
        DELETE FROM users WHERE u_id=#{uId} AND pw=#{pw}
    </delete>
    <!--    id ëŠ” ë§µí•‘í•˜ê¸° ìœ„í•´ ë§Œë“  ë³€ìˆ˜ëª… -->

<!--    resultType ì˜ dto ì˜ í•„ë“œëª…ê³¼ ì¹¼ëŸ¼ëª…ì´ ê°™ì€ ê²ƒì„ ë§µí•‘ -->
    <select id="findAll" resultMap="UsersMap">
<!--    <select id="findAll" resultType="com.acorn.springstartstudy.dto.UsersDto">-->
        SELECT * FROM USERS
<!--        í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¿¼ë¦¬ ê²°ê³¼ê°€ ì‹¤í–‰ë˜ì„œ ë§µí•‘ëœ ê²°ê³¼(resultType)ê°€ ë‚˜ì˜¨ë‹¤. -->
<!--        í•¨ìˆ˜ì´ë¦„ -->
<!--        êµ¬í˜„í•˜ê³  ì‹¶ì€  ì¿¼ë¦¬ -->
<!--        ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ë§ˆì´ë°”í‹°ìŠ¤ê°€ ê´€ë¦¬í•´ì¤€ë‹¤.-->
    </select>
    <select id="findByUId" resultMap="UsersMap">
        SELECT * FROM USERS WHERE u_id=#{uId}
<!--        íŒŒë¼ë¯¸í„°ëŠ” #  uId : UsersMapper.java ì—ì„œ ì „ë‹¬ë°›ì€ íŒŒë¼ë¯¸í„° -->
<!--        uId ëŠ” UsersDto ì˜ í•„ë“œëª…-->
    </select>

</mapper>